<!DOCTYPE html>
<html lang="id">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Lumio</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>

    <!-- ===== LOGIN ===== -->
    <section id="view-login">
        <div class="bg"></div>
        <header class="brand">
            <div class="logo-glow">
                <img src="LumioLogo3.png" class="logo-dot" alt="brandlogo">
            </div>
            <span class="brand-text">Lumio</span>
        </header>
        <main class="center">
            <section class="card">
                <h1 class="title">Welcome Back Lumers</h1>
                <p class="subtitle">Masuk ke akun Anda</p>
                <form class="form" autocomplete="on">
                    <div class="field">
                        <input id="email" type="email" placeholder=" " autocomplete="username" required />
                        <label for="email">Email Address</label>
                    </div>
                    <div class="field">
                        <input id="password" type="password" placeholder=" " autocomplete="current-password" required />
                        <label for="password">Password</label>
                    </div>
                    <div class="row">
                        <label class="remember"><input type="checkbox" /><span>Remember me</span></label>
                        <a class="link" href="#">Forgot password?</a>
                    </div>
                    <button class="btn" id="loginBtn" type="button">Sign In</button>
                    <p class="note">Login untuk <b>Admin</b> &amp; <b>User</b>.</p>
                    <div id="loginErr" class="error" role="alert"></div>
                </form>
            </section>
        </main>
    </section>

    <!-- ===== USER APP ===== -->
    <section id="view-user" class="app hide">
        <div class="topbar">
            <div class="left">
                <div class="logo-glow">
                    <img src="LumioLogo3.png" class="logo-dot" alt="BrandLogo">
                </div>
                <div class="logo">Lumio</div>
            </div>
            <div class="right">
                <div class="toggleShell" id="u-all">
                    <div class="all-label"><span class="bulb" aria-hidden="true">üí°</span><strong id="u-allText">ALL
                            OFF</strong></div>
                    <button id="u-toggleAllBtn" class="toggle-pill sm" type="button" aria-pressed="false"></button>
                </div>
                <span class="badge" id="u-role">Role: User</span>
                <button class="btn gray" id="u-logout">Logout</button>
            </div>
            <button class="menu-btn" id="u-menuBtn" type="button" aria-label="Menu" aria-expanded="false">‚ò∞</button>
        </div>
        <div class="body">
            <aside class="sidebar">
                <nav class="side-nav" id="u-sideNav">
                    <div class="side-link" data-view="dashboard">Dashboard</div>
                    <div class="side-link" data-view="rooms">Rooms</div>
                    <div class="side-link" data-view="schedules">Schedules</div>
                </nav>

                <!-- Kontrol tambahan khusus MOBILE (muncul di dalam menu hamburger) -->
                <div class="side-extra" id="u-sideExtra">
                    <div class="flex" style="justify-content:space-between;align-items:center;gap:8px;margin-top:8px;">
                        <div class="toggleShell" id="u-allMenu">
                            <div class="all-label">
                                <span class="bulb" aria-hidden="true">üí°</span>
                                <strong id="u-allMenuText">ALL OFF</strong>
                            </div>
                            <button id="u-toggleAllMenuBtn" class="toggle-pill sm" type="button"
                                aria-pressed="false"></button>
                        </div>
                        <button class="btn gray" id="u-logoutMenu" type="button">Logout</button>
                    </div>
                </div>
            </aside>
            <main class="main">
                <div id="u-view"></div>
            </main>
        </div>
    </section>

    <!-- ===== ADMIN APP ===== -->
    <section id="view-admin" class="app hide">
        <div class="topbar">
            <div class="left">
                <div class="logo-glow">
                    <img src="LumioLogo3.png" class="logo-dot" alt="BrandLogo">
                </div>
                <div class="logo">Lumio</div>
            </div>
            <div class="right">
                <div class="toggleShell" id="a-all">
                    <div class="all-label"><span class="bulb" aria-hidden="true">üí°</span><strong id="a-allText">ALL
                            OFF</strong></div>
                    <button id="a-toggleAllBtn" class="toggle-pill sm" type="button" aria-pressed="false"></button>
                </div>
                <span class="badge" id="a-role">Role: Admin</span>
                <button class="btn gray" id="a-logout">Logout</button>
            </div>
            <button class="menu-btn" id="a-menuBtn" type="button" aria-label="Menu" aria-expanded="false">‚ò∞</button>
        </div>
        <div class="body">
            <aside class="sidebar">
                <nav class="side-nav" id="a-sideNav">
                    <div class="side-link" data-view="dashboard">Dashboard</div>
                    <div class="side-link" data-view="rooms">Rooms</div>
                    <div class="side-link" data-view="schedules">Schedules</div>
                    <div class="side-link" data-view="log">Log</div>
                </nav>

                <!-- Kontrol tambahan khusus MOBILE (menu hamburger) -->
                <div class="side-extra" id="a-sideExtra">
                    <div class="flex" style="justify-content:space-between;align-items:center;gap:8px;margin-top:8px;">
                        <div class="toggleShell" id="a-allMenu">
                            <div class="all-label">
                                <span class="bulb" aria-hidden="true">üí°</span>
                                <strong id="a-allMenuText">ALL OFF</strong>
                            </div>
                            <button id="a-toggleAllMenuBtn" class="toggle-pill sm" type="button"
                                aria-pressed="false"></button>
                        </div>
                        <button class="btn gray" id="a-logoutMenu" type="button">Logout</button>
                    </div>
                </div>
            </aside>
            <main class="main">
                <div id="a-view"></div>
            </main>
        </div>
    </section>

    <!-- ===== TEMPLATES ===== -->
    <template id="tpl-lamp-row">
        <div class="lamp-row" data-dev="">
            <div class="lamp-col" style="min-width:200px;">
                <strong class="dev-name"></strong>
                <span class="badge" data-role="pwr"></span>
                <!-- Persentase dimmer (hanya satu, di kiri) -->
                <span class="badge" data-role="level-l" style="display:none;"></span>
                <!-- Label Non-dimmer juga di kiri -->
                <span class="badge gray non-dimmer" style="display:none;">Non-dimmer</span>
                <span class="badge device-online"></span>
            </div>
            <div class="lamp-col">
                <div class="dimmer-wrap">
                    <input type="range" class="range" min="0" max="100" step="1" data-u-dim="level">
                </div>
                <button class="btn" data-u-act="toggle"></button>
            </div>
        </div>
    </template>


    <template id="tpl-user-room">
        <div class="card mb-16" data-room="">
            <div class="flex" style="justify-content:space-between;margin-bottom:8px;">
                <div class="flex">
                    <div class="section-title room-name" style="margin:0;"></div><span class="badge room-count"></span>
                </div>
                <div class="flex">
                    <button class="btn green" data-u-roomact="on">ON</button>
                    <button class="btn red" data-u-roomact="off">OFF</button>
                </div>
            </div>
            <div class="flex room-chips"><span class="badge device-online"></span></div>
        </div>
    </template>

    <template id="tpl-admin-room">
        <div class="card mb-16" data-room="">
            <div class="flex" style="justify-content:space-between;align-items:center;margin-bottom:8px;">
                <div class="flex">
                    <div class="section-title room-name" style="margin:0;"></div><span class="badge room-count"></span>
                </div>
                <div class="flex">
                    <button class="btn green" data-rooms-act="on">ON</button>
                    <button class="btn red" data-rooms-act="off">OFF</button>
                    <button class="btn" data-room-del="">üóëÔ∏è Hapus</button>
                </div>
            </div>
            <div class="mb-8">Anggota saat ini:</div>
            <div class="flex mb-12 admin-chips"></div>
            <div class="mb-8">Kelola lampu di room ini:</div>
            <div class="flex admin-members" style="gap:16px;"></div>
        </div>
    </template>

    <!-- Firebase (compat) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>

    <script src="dom-utils.js"></script>
    <script src="firebase-init.js"></script>
    <script src="data-state.js"></script>
    <script src="log.js"></script>
    <script src="schedules.js"></script>
    <script src="views-user.js"></script>
    <script src="views-admin.js"></script>
    <script src="topbar-mobile.js"></script>
    <script src="main.js"></script>
</body>

</html>
